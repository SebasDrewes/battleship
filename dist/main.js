(()=>{"use strict";var e=function(e,t,r){var i={},a=t,n=r;if("horizontal"===n)for(var l=0;l<t;l+=1)i[e+l]="noHit";else if("vertical"===n)for(var o=0;o<10*t;o+=10)i[e+o]="noHit";return{hitPoints:i,hit:function(e){i[e]="hit"},isSunk:function(){return!!Object.values(i).every((function(e){return"hit"===e}))},shipLength:a}};var t=document.querySelector("#playerBoard"),r=document.querySelector("#enemyBoard");function i(e,t){return e.some((function(e){return t.includes(e)}))}var a=function e(i,a){for(r.style.display="grid";t.firstChild;)t.removeChild(t.firstChild);for(;r.firstChild;)r.removeChild(r.firstChild);for(var n=function(n,l,o){var c=document.createElement("div");c.textContent=n,c.classList.add("cellHittable"),c.classList.add("cellHidden"),c.setAttribute("data",[l]),!1===[10,21,32,43,54,65,76,87,98,109].includes(l)&&(c.classList.remove("cellHidden"),o?(r.appendChild(c),c.addEventListener("click",(function(){(function(e,t,r){if("hit"!==t.gameBoard[r]&&"noHit"!==t.gameBoard[r]){t.receiveAttack(r);for(var i=[],a=0;a<e.gameBoard.length;a+=1)"hit"!==e.gameBoard[a]&&"noHit"!==e.gameBoard[a]&&i.push(a);var n=i[Math.floor(Math.random()*i.length)];e.receiveAttack(n)}})(i,a,l),e(i,a)}))):(t.appendChild(c),c.classList.remove("cellHittable"),c.classList.add("cellFrendly")))},l=0;l<i.gameBoard.length;l+=1)n(i.gameBoard[l],l,!1);for(var o=0;o<a.gameBoard.length;o+=1)n(a.gameBoard[o],o,!0)},n="horizontal";document.querySelector("#change").addEventListener("click",(function(){n="horizontal"===n?"vertical":"horizontal"}));var l=function(){var t=[],r=["","","","","","","","","","","10","","","","","","","","","","","21","","","","","","","","","","","32","","","","","","","","","","","43","","","","","","","","","","","54","","","","","","","","","","","65","","","","","","","","","","","76","","","","","","","","","","","87","","","","","","","","","","","98","","","","","","","","","","","109"],i=[10,21,32,43,54,65,76,87,98,109];return{placeShip:function(a,n,l){var o=[];function c(e,t){return e.some((function(e){return t.includes(e)}))}if("horizontal"===l){for(var s=a;s<a+n;s+=1)!1===o.includes(s)&&o.push(s);if(!1===c(i,o)){if(a+n<120){var d=e(a,n,l);t.push(d);for(var u=a;u<a+n;u+=1)!1===i.includes(u)&&i.push(u);for(var h=0;h<d.shipLength;h+=1)r[a+h]=a;d.shipNumber=a}console.log(t)}}else if("vertical"===l){for(var v=a;v<a+11*n;v+=11)!1===o.includes(v)&&o.push(v);if(!1===c(i,o)&&a+11*n<120){var f=e(a,n,l);t.push(f);for(var p=a;p<a+11*n;p+=11)!1===i.includes(p)&&i.push(p);for(var m=0;m<11*f.shipLength;m+=11)r[a+m]=a;f.shipNumber=a}}},receiveAttack:function(e){if(""!==r[e])for(var i=0;i<t.length;i+=1)t[i].shipNumber===r[e]&&(r[e]="hit",t[i].hit(e));else r[e]="noHit"},gameBoard:r,shipList:t,allShipsSunked:function(){return!!t.every((function(e){return!0===e.isSunk()}))}}},o=l(),c=l();c.placeShip(0,5,"horizontal"),c.placeShip(10,4,"vertical"),c.placeShip(7,3,"horizontal"),c.placeShip(36,3,"vertical"),c.placeShip(96,2,"horizontal"),function e(r,l,o){for(;t.firstChild;)t.removeChild(t.firstChild);for(var c=function(c,s){var d=document.createElement("div"),u=[10,21,32,43,54,65,76,87,98,109];d.setAttribute("data",[s]),d.classList.add("cellHidden"),d.classList.add("cell"),d.textContent=c,t.appendChild(d),!1===u.includes(s)&&(d.classList.remove("cellHidden"),d.addEventListener("click",(function(){switch(r.placeShip(s,o,n),r.shipList.length){case 1:e(r,l,4);break;case 2:case 3:e(r,l,3);break;case 4:e(r,l,2);break;case 5:a(r,l);break;default:e(r,l,4)}for(var t=s;t<s+o;t+=1)u.push(t);for(var i=document.querySelectorAll(".cell"),c=0;c<i.length;c+=1)""!==i[c].textContent&&i[c].classList.add("cellShip")})),d.addEventListener("mouseover",(function(){var e=document.querySelectorAll(".cell"),t=[];if("horizontal"===n){for(var r=0;r<e.length;r+=1)if(e[r].getAttribute("data")===s.toString()){for(var a=0;a<o;a+=1)!1===t.includes(r+a)&&t.push(r+a);for(var l=0;l<o;l+=1){var c=t.every((function(t){return void 0!==e[t]&&""===e[t].textContent}));!1===i(u,t)&&c?e[r+l]&&e[r+l].classList.add("hoverCell"):e[r].classList.add("invalidCell")}}}else for(var d=0;d<e.length;d+=1)if(e[d].getAttribute("data")===s.toString()){for(var h=0;h<11*o;h+=11)!1===t.includes(d+h)&&t.push(d+h);for(var v=0;v<11*o;v+=11){var f=t.every((function(t){return void 0!==e[t]&&""===e[t].textContent}));!1===i(u,t)&&f?e[d+v]&&e[d+v].classList.add("hoverCell"):e[d].classList.add("invalidCell")}}})),d.addEventListener("mouseleave",(function(){var e=document.querySelectorAll(".cell");e.forEach((function(e){return e.classList.remove("hoverCell")})),e.forEach((function(e){return e.classList.remove("invalidCell")}))})))},s=0;s<r.gameBoard.length;s+=1)c(r.gameBoard[s],s)}(o,c,5)})();