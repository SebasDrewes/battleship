(()=>{"use strict";var e=function(e,t,r){var n={},i=t,o=r;if("horizontal"===o)for(var l=0;l<t;l+=1)n[e+l]="noHit";else if("vertical"===o)for(var a=0;a<10*t;a+=10)n[e+a]="noHit";return{hitPoints:n,hit:function(e){n[e]="hit"},isSunk:function(){return!!Object.values(n).every((function(e){return"hit"===e}))},shipLength:i}};var t=document.querySelector("#container"),r="horizontal";document.querySelector("#change").addEventListener("click",(function(){r="horizontal"===r?"vertical":"horizontal"}));var n=function(){var t=[],r=["","","","","","","","","","","10","","","","","","","","","","","21","","","","","","","","","","","32","","","","","","","","","","","43","","","","","","","","","","","54","","","","","","","","","","","65","","","","","","","","","","","76","","","","","","","","","","","87","","","","","","","","","","","98","","","","","","","","","","","109"],n=[10,21,32,43,54,65,76,87,98,109];return{placeShip:function(i,o,l){var a=[];function s(e,t){return e.some((function(e){return t.includes(e)}))}if("horizontal"===l){for(var c=i;c<i+o;c+=1)!1===a.includes(c)&&a.push(c);if(!1===s(n,a)&&i+o<200){var u=e(i,o,l);t.push(u);for(var v=i;v<i+o;v+=1)!1===n.includes(v)&&n.push(v);for(var d=0;d<u.shipLength;d+=1)r[i+d]=i;u.shipNumber=i}}else if("vertical"===l){for(var f=i;f<i+11*o;f+=11)!1===a.includes(f)&&a.push(f);if(!1===s(n,a)&&i+11*o<120){var h=e(i,o,l);t.push(h);for(var p=i;p<i+11*o;p+=11)!1===n.includes(p)&&n.push(p);for(var m=0;m<11*h.shipLength;m+=11)r[i+m]=i;h.shipNumber=i}}},receiveAttack:function(e){if(""!==r[e])for(var n=0;n<t.length;n+=1)t[n].shipNumber===r[e]&&(r[e]="hit",t[n].hit(e));else r[e]="noHit"},gameBoard:r,shipList:t,allShipsSunked:function(){return!!t.every((function(e){return!0===e.isSunk()}))}}},i=n();n(),function e(n,i){for(;t.firstChild;)t.removeChild(t.firstChild);for(var o=function(o,l){var a=document.createElement("div"),s=[10,21,32,43,54,65,76,87,98,109];function c(e,t){return e.some((function(e){return t.includes(e)}))}a.setAttribute("data",[l]),a.classList.add("cellHidden"),a.classList.add("cell"),a.textContent=o,t.appendChild(a),!1===s.includes(l)&&(a.classList.remove("cellHidden"),a.addEventListener("click",(function(){n.placeShip(l,i,r),e(n,i);for(var t=l;t<l+i;t+=1)s.push(t)})),a.addEventListener("mouseover",(function(){var e=document.querySelectorAll(".cell"),t=[];if("horizontal"===r){for(var n=0;n<e.length;n+=1)if(e[n].getAttribute("data")===l.toString()){for(var o=0;o<i;o+=1)!1===t.includes(n+o)&&t.push(n+o);for(var a=0;a<i;a+=1){var u=t.every((function(t){return void 0!==e[t]&&""===e[t].textContent}));console.log(t),console.log(u),!1===c(s,t)&&u?e[n+a]&&e[n+a].classList.add("hoverCell"):e[n].classList.add("invalidCell")}}}else for(var v=0;v<e.length;v+=1)if(e[v].getAttribute("data")===l.toString()){for(var d=0;d<11*i;d+=11)!1===t.includes(v+d)&&t.push(v+d);for(var f=0;f<11*i;f+=11){var h=t.every((function(t){return void 0!==e[t]&&""===e[t].textContent}));console.log(t),console.log(h),!1===c(s,t)&&h?e[v+f]&&e[v+f].classList.add("hoverCell"):e[v].classList.add("invalidCell")}}})),a.addEventListener("mouseleave",(function(){var e=document.querySelectorAll(".cell");e.forEach((function(e){return e.classList.remove("hoverCell")})),e.forEach((function(e){return e.classList.remove("invalidCell")}))})))},l=0;l<n.gameBoard.length;l+=1)o(n.gameBoard[l],l)}(i,3)})();