(()=>{"use strict";var e=function(e,a,t){var r={},o=a,i=t;if("horizontal"===i)for(var n=0;n<a;n+=1)r[e+n]="noHit";else if("vertical"===i)for(var d=0;d<11*a;d+=11)r[e+d]="noHit";return{hitPoints:r,hit:function(e){r[e]="hit"},isSunk:function(){return!!Object.values(r).every((function(e){return"hit"===e}))},shipLength:o}};var a="",t="",r="",o="",i=document.querySelector("#playerBoard"),n=document.querySelector("#enemyBoard"),d=document.querySelector("#tuRadar"),l=document.querySelector("#enemyRadar"),s=document.querySelector("#enemyRadarMobile"),c=document.querySelector("#text"),u=document.querySelector("#change"),m=document.querySelector("#title"),h=document.querySelector("#puertaCorrediza"),g=document.querySelector("#newGame");function f(e,a){return e.some((function(e){return a.includes(e)}))}var v=function e(d,l){for(u.style.display="none",n.style.display="grid";i.firstChild;)i.removeChild(i.firstChild);for(;n.firstChild;)n.removeChild(n.firstChild);for(var s=function(s,c,u){var h=document.createElement("div");h.textContent=s,h.classList.add("cellHittable"),h.classList.add("cellHidden"),h.setAttribute("data",[c]),!1===[10,21,32,43,54,65,76,87,98,109].includes(c)&&(h.classList.remove("cellHidden"),u?(n.appendChild(h),h.addEventListener("click",(function(){if(function(e,i,n){function d(e,a){return e.some((function(e){return a===e}))}if("hit"!==i.gameBoard[n]&&"noHit"!==i.gameBoard[n]){i.receiveAttack(n);for(var l=[10,21,32,43,54,65,76,87,98,109],s=[],c=0;c<e.gameBoard.length;c+=1)"hit"!==e.gameBoard[c]&&"noHit"!==e.gameBoard[c]&&!1===d(l,e.gameBoard[c])&&s.push(c);if("hit"===e.gameBoard[a]){if(s=[],t=a,""!==e.gameBoard[a-1]&&isNaN(e.gameBoard[a-1])||!1!==d(l,e.gameBoard[a-1])||s.push(a-1),""!==e.gameBoard[a+1]&&isNaN(e.gameBoard[a+1])||!1!==d(l,e.gameBoard[a+1])||s.push(a+1),""!==e.gameBoard[a+11]&&isNaN(e.gameBoard[a+11])||!1!==d(l,e.gameBoard[a+11])||s.push(a+11),""!==e.gameBoard[a-11]&&isNaN(e.gameBoard[a-11])||!1!==d(l,e.gameBoard[a-11])||s.push(a-11),!s[0])for(var u=0;u<e.gameBoard.length;u+=1)"hit"!==e.gameBoard[u]&&"noHit"!==e.gameBoard[u]&&!1===d(l,e.gameBoard[u])&&s.push(u)}else if("hit"===e.gameBoard[t]&&"noHit"===e.gameBoard[a]){if(s=[],r=t,""!==e.gameBoard[t-1]&&isNaN(e.gameBoard[t-1])||!1!==d(l,e.gameBoard[t-1])||s.push(t-1),""!==e.gameBoard[t+1]&&isNaN(e.gameBoard[t+1])||!1!==d(l,e.gameBoard[t+1])||s.push(t+1),""!==e.gameBoard[t+11]&&isNaN(e.gameBoard[t+11])||!1!==d(l,e.gameBoard[t+11])||s.push(t+11),""!==e.gameBoard[t-11]&&isNaN(e.gameBoard[t-11])||!1!==d(l,e.gameBoard[t-11])||s.push(t-11),!s[0])for(var m=0;m<e.gameBoard.length;m+=1)"hit"!==e.gameBoard[m]&&"noHit"!==e.gameBoard[m]&&!1===d(l,e.gameBoard[m])&&s.push(m)}else if("hit"===e.gameBoard[r]&&"noHit"===e.gameBoard[a]){if(s=[],o=r,""!==e.gameBoard[r-1]&&isNaN(e.gameBoard[r-1])||!1!==d(l,e.gameBoard[r-1])||s.push(r-1),""!==e.gameBoard[r+1]&&isNaN(e.gameBoard[r+1])||!1!==d(l,e.gameBoard[r+1])||s.push(r+1),""!==e.gameBoard[r+11]&&isNaN(e.gameBoard[r+11])||!1!==d(l,e.gameBoard[r+11])||s.push(r+11),""!==e.gameBoard[r-11]&&isNaN(e.gameBoard[r-11])||!1!==d(l,e.gameBoard[r-11])||s.push(r-11),!s[0])for(var h=0;h<e.gameBoard.length;h+=1)"hit"!==e.gameBoard[h]&&"noHit"!==e.gameBoard[h]&&!1===d(l,e.gameBoard[h])&&s.push(h)}else if("hit"===e.gameBoard[o]&&"noHit"===e.gameBoard[a]&&(s=[],""!==e.gameBoard[o-1]&&isNaN(e.gameBoard[o-1])||!1!==d(l,e.gameBoard[o-1])||s.push(o-1),""!==e.gameBoard[o+1]&&isNaN(e.gameBoard[o+1])||!1!==d(l,e.gameBoard[o+1])||s.push(o+1),""!==e.gameBoard[o+11]&&isNaN(e.gameBoard[o+11])||!1!==d(l,e.gameBoard[o+11])||s.push(o+11),""!==e.gameBoard[o-11]&&isNaN(e.gameBoard[o-11])||!1!==d(l,e.gameBoard[o-11])||s.push(o-11),!s[0]))for(var g=0;g<e.gameBoard.length;g+=1)"hit"!==e.gameBoard[g]&&"noHit"!==e.gameBoard[g]&&!1===d(l,e.gameBoard[g])&&s.push(g);var f=s[Math.floor(Math.random()*s.length)];a=f,e.receiveAttack(f)}}(d,l,c),e(d,l),null!==h.textContent.match(/^[0-9]+$/))for(var i=0;i<l.shipList.length;i+=1){if(h.textContent===l.shipList[i].shipNumber.toString()&&!0===l.shipList[i].isSunk()){m.textContent="¡Hundiste un barco enemigo!";break}m.textContent="¡Le diste a un barco enemigo!"}else""===h.textContent&&(m.textContent="¡Fallaste el tiro!");l.allShipsSunked()?console.log("ganaste*placeholder*"):d.allShipsSunked()&&console.log("perdiste*placeholder*")})),h.addEventListener("mouseover",(function(){h.classList.add("hoverCell")})),h.addEventListener("mouseleave",(function(){h.classList.remove("hoverCell")})),"hit"===h.textContent?h.classList.add("cellShipHitted"):"noHit"===h.textContent&&h.classList.add("cellMiss")):(i.appendChild(h),h.classList.remove("cellHittable"),h.classList.add("cellFriendly"),null!==h.textContent.match(/^[0-9]+$/)?h.classList.add("cellShip"):"hit"===h.textContent?h.classList.add("cellShipHittedFriendly"):"noHit"===h.textContent&&h.classList.add("cellMissFriendly")))},c=0;c<d.gameBoard.length;c+=1)s(d.gameBoard[c],c,!1);for(var h=0;h<l.gameBoard.length;h+=1)s(l.gameBoard[h],h,!0)},p="horizontal",B=window.matchMedia("(max-width: 1050px)");u.addEventListener("click",(function(){p="horizontal"===p?"vertical":"horizontal"})),document.querySelector("#github").addEventListener("click",(function(){window.open("https://github.com/SebasDrewes/","_blank")})),g.addEventListener("click",(function(){h.style.width="0%",g.style.opacity="0"}));var y=function(){var a=[],t=["","","","","","","","","","",10,"","","","","","","","","","",21,"","","","","","","","","","",32,"","","","","","","","","","",43,"","","","","","","","","","",54,"","","","","","","","","","",65,"","","","","","","","","","",76,"","","","","","","","","","",87,"","","","","","","","","","",98,"","","","","","","","","","",109],r=[10,21,32,43,54,65,76,87,98,109];return{placeShip:function(o,i,n){var d=[];function l(e,a){return e.some((function(e){return a.includes(e)}))}if("horizontal"===n){for(var s=o;s<o+i;s+=1)!1===d.includes(s)&&d.push(s);if(!1===l(r,d)){if(o+i<120){var c=e(o,i,n);a.push(c);for(var u=o;u<o+i;u+=1)!1===r.includes(u)&&r.push(u);for(var m=0;m<c.shipLength;m+=1)t[o+m]=o;c.shipNumber=o}console.log(a)}}else if("vertical"===n){for(var h=o;h<o+11*i;h+=11)!1===d.includes(h)&&d.push(h);if(!1===l(r,d)&&o+11*i<120){var g=e(o,i,n);a.push(g);for(var f=o;f<o+11*i;f+=11)!1===r.includes(f)&&r.push(f);for(var v=0;v<11*g.shipLength;v+=11)t[o+v]=o;g.shipNumber=o}}},receiveAttack:function(e){if(""!==t[e])for(var r=0;r<a.length;r+=1)a[r].shipNumber===t[e]&&(t[e]="hit",a[r].hit(e));else t[e]="noHit"},gameBoard:t,shipList:a,allShipsSunked:function(){return!!a.every((function(e){return!0===e.isSunk()}))}}},L=y(),S=y();S.placeShip(0,5,"horizontal"),S.placeShip(44,3,"vertical"),S.placeShip(7,3,"horizontal"),S.placeShip(36,3,"vertical"),S.placeShip(96,2,"horizontal"),function e(a,t,r){for(;i.firstChild;)i.removeChild(i.firstChild);for(var o=function(o,n){var u=document.createElement("div"),h=[10,21,32,43,54,65,76,87,98,109];u.setAttribute("data",[n]),u.classList.add("cellHidden"),u.classList.add("cell"),u.textContent=o,i.appendChild(u),!1===h.includes(n)&&(u.classList.remove("cellHidden"),u.addEventListener("click",(function(){switch(a.placeShip(n,r,p),a.shipList.length){case 1:e(a,t,4);break;case 2:case 3:e(a,t,3);break;case 4:e(a,t,2);break;case 5:v(a,t),m.textContent="Esperando instrucciones...",c.style.display="none",function(e){e.matches?(s.style.display="block",m.style.fontSize="2.5em",d.style.display="block"):(d.style.display="block",l.style.display="block")}(B);break;default:e(a,t,4)}for(var o=n;o<n+r;o+=1)h.push(o);for(var i=document.querySelectorAll(".cell"),u=0;u<i.length;u+=1)""!==i[u].textContent&&i[u].classList.add("cellShip")})),u.addEventListener("mouseover",(function(){var e=document.querySelectorAll(".cell"),a=[];if("horizontal"===p){for(var t=0;t<e.length;t+=1)if(e[t].getAttribute("data")===n.toString()){for(var o=0;o<r;o+=1)!1===a.includes(t+o)&&a.push(t+o);for(var i=0;i<r;i+=1){var d=a.every((function(a){return void 0!==e[a]&&""===e[a].textContent}));!1===f(h,a)&&d?e[t+i]&&e[t+i].classList.add("hoverCell"):e[t].classList.add("invalidCell")}}}else for(var l=0;l<e.length;l+=1)if(e[l].getAttribute("data")===n.toString()){for(var s=0;s<11*r;s+=11)!1===a.includes(l+s)&&a.push(l+s);for(var c=0;c<11*r;c+=11){var u=a.every((function(a){return void 0!==e[a]&&""===e[a].textContent}));!1===f(h,a)&&u?e[l+c]&&e[l+c].classList.add("hoverCell"):e[l].classList.add("invalidCell")}}})),u.addEventListener("mouseleave",(function(){var e=document.querySelectorAll(".cell");e.forEach((function(e){return e.classList.remove("hoverCell")})),e.forEach((function(e){return e.classList.remove("invalidCell")}))})))},n=0;n<a.gameBoard.length;n+=1)o(a.gameBoard[n],n)}(L,S,5)})();