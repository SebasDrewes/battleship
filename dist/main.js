(()=>{"use strict";var e=function(e,t,n){var i={},r=t,l=n;if("horizontal"===l)for(var a=0;a<t;a+=1)i[e+a]="noHit";else if("vertical"===l)for(var o=0;o<11*t;o+=11)i[e+o]="noHit";return{hitPoints:i,hit:function(e){i[e]="hit"},isSunk:function(){return!!Object.values(i).every((function(e){return"hit"===e}))},shipLength:r}};var t=document.querySelector("#playerBoard"),n=document.querySelector("#enemyBoard"),i=document.querySelector("#tuRadar"),r=document.querySelector("#enemyRadar"),l=document.querySelector("#enemyRadarMobile"),a=document.querySelector("#text"),o=document.querySelector("#change"),s=document.querySelector("#title");function c(e,t){return e.some((function(e){return t.includes(e)}))}var d=function e(i,r){for(o.style.display="none",n.style.display="grid";t.firstChild;)t.removeChild(t.firstChild);for(;n.firstChild;)n.removeChild(n.firstChild);for(var l=function(l,a,o){var c=document.createElement("div");c.textContent=l,c.classList.add("cellHittable"),c.classList.add("cellHidden"),c.setAttribute("data",[a]),!1===[10,21,32,43,54,65,76,87,98,109].includes(a)&&(c.classList.remove("cellHidden"),o?(n.appendChild(c),c.addEventListener("click",(function(){if(function(e,t,n){function i(e,t){return e.some((function(e){return t===e}))}if("hit"!==t.gameBoard[n]&&"noHit"!==t.gameBoard[n]){t.receiveAttack(n);for(var r=[10,21,32,43,54,65,76,87,98,109],l=[],a=0;a<e.gameBoard.length;a+=1)"hit"!==e.gameBoard[a]&&"noHit"!==e.gameBoard[a]&&!1===i(r,e.gameBoard[a])&&l.push(a);var o=l[Math.floor(Math.random()*l.length)];e.receiveAttack(o),console.log(e.gameBoard)}}(i,r,a),e(i,r),null!==c.textContent.match(/^[0-9]+$/))for(var t=0;t<r.shipList.length;t+=1){if(c.textContent===r.shipList[t].shipNumber.toString()&&!0===r.shipList[t].isSunk()){s.textContent="¡Hundiste un barco enemigo!";break}s.textContent="¡Le diste a un barco enemigo!"}else""===c.textContent&&(s.textContent="¡Fallaste el tiro!");r.allShipsSunked()?console.log("ganaste*placeholder*"):i.allShipsSunked()&&console.log("perdiste*placeholder*")})),c.addEventListener("mouseover",(function(){c.classList.add("hoverCell")})),c.addEventListener("mouseleave",(function(){c.classList.remove("hoverCell")})),"hit"===c.textContent?c.classList.add("cellShipHitted"):"noHit"===c.textContent&&c.classList.add("cellMiss")):(t.appendChild(c),c.classList.remove("cellHittable"),c.classList.add("cellFriendly"),null!==c.textContent.match(/^[0-9]+$/)?c.classList.add("cellShip"):"hit"===c.textContent?c.classList.add("cellShipHittedFriendly"):"noHit"===c.textContent&&c.classList.add("cellMissFriendly")))},a=0;a<i.gameBoard.length;a+=1)l(i.gameBoard[a],a,!1);for(var c=0;c<r.gameBoard.length;c+=1)l(r.gameBoard[c],c,!0)},u="horizontal",h=window.matchMedia("(max-width: 1050px)");o.addEventListener("click",(function(){u="horizontal"===u?"vertical":"horizontal"})),document.querySelector("#github").addEventListener("click",(function(){window.open("https://github.com/SebasDrewes/","_blank")}));var v=function(){var t=[],n=["","","","","","","","","","",10,"","","","","","","","","","",21,"","","","","","","","","","",32,"","","","","","","","","","",43,"","","","","","","","","","",54,"","","","","","","","","","",65,"","","","","","","","","","",76,"","","","","","","","","","",87,"","","","","","","","","","",98,"","","","","","","","","","",109],i=[10,21,32,43,54,65,76,87,98,109];return{placeShip:function(r,l,a){var o=[];function s(e,t){return e.some((function(e){return t.includes(e)}))}if("horizontal"===a){for(var c=r;c<r+l;c+=1)!1===o.includes(c)&&o.push(c);if(!1===s(i,o)){if(r+l<120){var d=e(r,l,a);t.push(d);for(var u=r;u<r+l;u+=1)!1===i.includes(u)&&i.push(u);for(var h=0;h<d.shipLength;h+=1)n[r+h]=r;d.shipNumber=r}console.log(t)}}else if("vertical"===a){for(var v=r;v<r+11*l;v+=11)!1===o.includes(v)&&o.push(v);if(!1===s(i,o)&&r+11*l<120){var f=e(r,l,a);t.push(f);for(var p=r;p<r+11*l;p+=11)!1===i.includes(p)&&i.push(p);for(var m=0;m<11*f.shipLength;m+=11)n[r+m]=r;f.shipNumber=r}}},receiveAttack:function(e){if(""!==n[e])for(var i=0;i<t.length;i+=1)t[i].shipNumber===n[e]&&(n[e]="hit",t[i].hit(e));else n[e]="noHit"},gameBoard:n,shipList:t,allShipsSunked:function(){return!!t.every((function(e){return!0===e.isSunk()}))}}},f=v(),p=v();p.placeShip(0,5,"horizontal"),p.placeShip(44,3,"vertical"),p.placeShip(7,3,"horizontal"),p.placeShip(36,3,"vertical"),p.placeShip(96,2,"horizontal"),function e(n,o,v){for(;t.firstChild;)t.removeChild(t.firstChild);for(var f=function(f,p){var m=document.createElement("div"),g=[10,21,32,43,54,65,76,87,98,109];m.setAttribute("data",[p]),m.classList.add("cellHidden"),m.classList.add("cell"),m.textContent=f,t.appendChild(m),!1===g.includes(p)&&(m.classList.remove("cellHidden"),m.addEventListener("click",(function(){switch(n.placeShip(p,v,u),n.shipList.length){case 1:e(n,o,4);break;case 2:case 3:e(n,o,3);break;case 4:e(n,o,2);break;case 5:d(n,o),s.textContent="Esperando instrucciones...",a.style.display="none",function(e){e.matches?(l.style.display="block",s.style.fontSize="2.5em",i.style.display="block"):(i.style.display="block",r.style.display="block")}(h);break;default:e(n,o,4)}for(var t=p;t<p+v;t+=1)g.push(t);for(var c=document.querySelectorAll(".cell"),f=0;f<c.length;f+=1)""!==c[f].textContent&&c[f].classList.add("cellShip")})),m.addEventListener("mouseover",(function(){var e=document.querySelectorAll(".cell"),t=[];if("horizontal"===u){for(var n=0;n<e.length;n+=1)if(e[n].getAttribute("data")===p.toString()){for(var i=0;i<v;i+=1)!1===t.includes(n+i)&&t.push(n+i);for(var r=0;r<v;r+=1){var l=t.every((function(t){return void 0!==e[t]&&""===e[t].textContent}));!1===c(g,t)&&l?e[n+r]&&e[n+r].classList.add("hoverCell"):e[n].classList.add("invalidCell")}}}else for(var a=0;a<e.length;a+=1)if(e[a].getAttribute("data")===p.toString()){for(var o=0;o<11*v;o+=11)!1===t.includes(a+o)&&t.push(a+o);for(var s=0;s<11*v;s+=11){var d=t.every((function(t){return void 0!==e[t]&&""===e[t].textContent}));!1===c(g,t)&&d?e[a+s]&&e[a+s].classList.add("hoverCell"):e[a].classList.add("invalidCell")}}})),m.addEventListener("mouseleave",(function(){var e=document.querySelectorAll(".cell");e.forEach((function(e){return e.classList.remove("hoverCell")})),e.forEach((function(e){return e.classList.remove("invalidCell")}))})))},p=0;p<n.gameBoard.length;p+=1)f(n.gameBoard[p],p)}(f,p,5)})();