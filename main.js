(()=>{"use strict";var e=function(e,t,a){var r={},i=t,o=a;if("horizontal"===o)for(var n=0;n<t;n+=1)r[e+n]="noHit";else if("vertical"===o)for(var l=0;l<11*t;l+=11)r[e+l]="noHit";return{hitPoints:r,hit:function(e){r[e]="hit"},isSunk:function(){return!!Object.values(r).every((function(e){return"hit"===e}))},shipLength:i}};var t="",a="",r=document.querySelector("#playerBoard"),i=document.querySelector("#enemyBoard"),o=document.querySelector("#tuRadar"),n=document.querySelector("#enemyRadar"),l=document.querySelector("#enemyRadarMobile"),s=document.querySelector("#text"),d=document.querySelector("#change"),c=document.querySelector("#title");function u(e,t){return e.some((function(e){return t.includes(e)}))}var h=function e(o,n){for(d.style.display="none",i.style.display="grid";r.firstChild;)r.removeChild(r.firstChild);for(;i.firstChild;)i.removeChild(i.firstChild);for(var l=function(l,s,d){var u=document.createElement("div");u.textContent=l,u.classList.add("cellHittable"),u.classList.add("cellHidden"),u.setAttribute("data",[s]),!1===[10,21,32,43,54,65,76,87,98,109].includes(s)&&(u.classList.remove("cellHidden"),d?(i.appendChild(u),u.addEventListener("click",(function(){if(function(e,r,i){function o(e,t){return e.some((function(e){return t===e}))}if("hit"!==r.gameBoard[i]&&"noHit"!==r.gameBoard[i]){r.receiveAttack(i);for(var n=[10,21,32,43,54,65,76,87,98,109],l=[],s=0;s<e.gameBoard.length;s+=1)"hit"!==e.gameBoard[s]&&"noHit"!==e.gameBoard[s]&&!1===o(n,e.gameBoard[s])&&l.push(s);if("hit"===e.gameBoard[t]){if(l=[],a=t,""!==e.gameBoard[t-1]&&isNaN(e.gameBoard[t-1])||!1!==o(n,e.gameBoard[t-1])||l.push(t-1),""!==e.gameBoard[t+1]&&isNaN(e.gameBoard[t+1])||!1!==o(n,e.gameBoard[t+1])||l.push(t+1),""!==e.gameBoard[t+11]&&isNaN(e.gameBoard[t+11])||!1!==o(n,e.gameBoard[t+11])||l.push(t+11),""!==e.gameBoard[t-11]&&isNaN(e.gameBoard[t-11])||!1!==o(n,e.gameBoard[t-11])||l.push(t-11),!l[0])for(var d=0;d<e.gameBoard.length;d+=1)"hit"!==e.gameBoard[d]&&"noHit"!==e.gameBoard[d]&&!1===o(n,e.gameBoard[d])&&l.push(d)}else if("hit"===e.gameBoard[a]&&"noHit"===e.gameBoard[t]&&(l=[],""!==e.gameBoard[a-1]&&isNaN(e.gameBoard[a-1])||!1!==o(n,e.gameBoard[a-1])||l.push(a-1),""!==e.gameBoard[a+1]&&isNaN(e.gameBoard[a+1])||!1!==o(n,e.gameBoard[a+1])||l.push(a+1),""!==e.gameBoard[a+11]&&isNaN(e.gameBoard[a+11])||!1!==o(n,e.gameBoard[t+11])||l.push(a+11),""!==e.gameBoard[a-11]&&isNaN(e.gameBoard[a-11])||!1!==o(n,e.gameBoard[a-11])||l.push(a-11),!l[0]))for(var c=0;c<e.gameBoard.length;c+=1)"hit"!==e.gameBoard[c]&&"noHit"!==e.gameBoard[c]&&!1===o(n,e.gameBoard[c])&&l.push(c);var u=l[Math.floor(Math.random()*l.length)];t=u,e.receiveAttack(u)}}(o,n,s),e(o,n),null!==u.textContent.match(/^[0-9]+$/))for(var r=0;r<n.shipList.length;r+=1){if(u.textContent===n.shipList[r].shipNumber.toString()&&!0===n.shipList[r].isSunk()){c.textContent="¡Hundiste un barco enemigo!";break}c.textContent="¡Le diste a un barco enemigo!"}else""===u.textContent&&(c.textContent="¡Fallaste el tiro!");n.allShipsSunked()?console.log("ganaste*placeholder*"):o.allShipsSunked()&&console.log("perdiste*placeholder*")})),u.addEventListener("mouseover",(function(){u.classList.add("hoverCell")})),u.addEventListener("mouseleave",(function(){u.classList.remove("hoverCell")})),"hit"===u.textContent?u.classList.add("cellShipHitted"):"noHit"===u.textContent&&u.classList.add("cellMiss")):(r.appendChild(u),u.classList.remove("cellHittable"),u.classList.add("cellFriendly"),null!==u.textContent.match(/^[0-9]+$/)?u.classList.add("cellShip"):"hit"===u.textContent?u.classList.add("cellShipHittedFriendly"):"noHit"===u.textContent&&u.classList.add("cellMissFriendly")))},s=0;s<o.gameBoard.length;s+=1)l(o.gameBoard[s],s,!1);for(var u=0;u<n.gameBoard.length;u+=1)l(n.gameBoard[u],u,!0)},m="horizontal",f=window.matchMedia("(max-width: 1050px)");d.addEventListener("click",(function(){m="horizontal"===m?"vertical":"horizontal"})),document.querySelector("#github").addEventListener("click",(function(){window.open("https://github.com/SebasDrewes/","_blank")}));var v=function(){var t=[],a=["","","","","","","","","","",10,"","","","","","","","","","",21,"","","","","","","","","","",32,"","","","","","","","","","",43,"","","","","","","","","","",54,"","","","","","","","","","",65,"","","","","","","","","","",76,"","","","","","","","","","",87,"","","","","","","","","","",98,"","","","","","","","","","",109],r=[10,21,32,43,54,65,76,87,98,109];return{placeShip:function(i,o,n){var l=[];function s(e,t){return e.some((function(e){return t.includes(e)}))}if("horizontal"===n){for(var d=i;d<i+o;d+=1)!1===l.includes(d)&&l.push(d);if(!1===s(r,l)){if(i+o<120){var c=e(i,o,n);t.push(c);for(var u=i;u<i+o;u+=1)!1===r.includes(u)&&r.push(u);for(var h=0;h<c.shipLength;h+=1)a[i+h]=i;c.shipNumber=i}console.log(t)}}else if("vertical"===n){for(var m=i;m<i+11*o;m+=11)!1===l.includes(m)&&l.push(m);if(!1===s(r,l)&&i+11*o<120){var f=e(i,o,n);t.push(f);for(var v=i;v<i+11*o;v+=11)!1===r.includes(v)&&r.push(v);for(var g=0;g<11*f.shipLength;g+=11)a[i+g]=i;f.shipNumber=i}}},receiveAttack:function(e){if(""!==a[e])for(var r=0;r<t.length;r+=1)t[r].shipNumber===a[e]&&(a[e]="hit",t[r].hit(e));else a[e]="noHit"},gameBoard:a,shipList:t,allShipsSunked:function(){return!!t.every((function(e){return!0===e.isSunk()}))}}},g=v(),p=v();p.placeShip(0,5,"horizontal"),p.placeShip(44,3,"vertical"),p.placeShip(7,3,"horizontal"),p.placeShip(36,3,"vertical"),p.placeShip(96,2,"horizontal"),function e(t,a,i){for(;r.firstChild;)r.removeChild(r.firstChild);for(var d=function(d,v){var g=document.createElement("div"),p=[10,21,32,43,54,65,76,87,98,109];g.setAttribute("data",[v]),g.classList.add("cellHidden"),g.classList.add("cell"),g.textContent=d,r.appendChild(g),!1===p.includes(v)&&(g.classList.remove("cellHidden"),g.addEventListener("click",(function(){switch(t.placeShip(v,i,m),t.shipList.length){case 1:e(t,a,4);break;case 2:case 3:e(t,a,3);break;case 4:e(t,a,2);break;case 5:h(t,a),c.textContent="Esperando instrucciones...",s.style.display="none",function(e){e.matches?(l.style.display="block",c.style.fontSize="2.5em",o.style.display="block"):(o.style.display="block",n.style.display="block")}(f);break;default:e(t,a,4)}for(var r=v;r<v+i;r+=1)p.push(r);for(var d=document.querySelectorAll(".cell"),u=0;u<d.length;u+=1)""!==d[u].textContent&&d[u].classList.add("cellShip")})),g.addEventListener("mouseover",(function(){var e=document.querySelectorAll(".cell"),t=[];if("horizontal"===m){for(var a=0;a<e.length;a+=1)if(e[a].getAttribute("data")===v.toString()){for(var r=0;r<i;r+=1)!1===t.includes(a+r)&&t.push(a+r);for(var o=0;o<i;o+=1){var n=t.every((function(t){return void 0!==e[t]&&""===e[t].textContent}));!1===u(p,t)&&n?e[a+o]&&e[a+o].classList.add("hoverCell"):e[a].classList.add("invalidCell")}}}else for(var l=0;l<e.length;l+=1)if(e[l].getAttribute("data")===v.toString()){for(var s=0;s<11*i;s+=11)!1===t.includes(l+s)&&t.push(l+s);for(var d=0;d<11*i;d+=11){var c=t.every((function(t){return void 0!==e[t]&&""===e[t].textContent}));!1===u(p,t)&&c?e[l+d]&&e[l+d].classList.add("hoverCell"):e[l].classList.add("invalidCell")}}})),g.addEventListener("mouseleave",(function(){var e=document.querySelectorAll(".cell");e.forEach((function(e){return e.classList.remove("hoverCell")})),e.forEach((function(e){return e.classList.remove("invalidCell")}))})))},v=0;v<t.gameBoard.length;v+=1)d(t.gameBoard[v],v)}(g,p,5)})();