(()=>{"use strict";var e=function(e,t,a){var r={},i=t,n=a;if("horizontal"===n)for(var o=0;o<t;o+=1)r[e+o]="noHit";else if("vertical"===n)for(var l=0;l<11*t;l+=11)r[e+l]="noHit";return{hitPoints:r,hit:function(e){r[e]="hit"},isSunk:function(){return!!Object.values(r).every((function(e){return"hit"===e}))},shipLength:i}};var t="",a=document.querySelector("#playerBoard"),r=document.querySelector("#enemyBoard"),i=document.querySelector("#tuRadar"),n=document.querySelector("#enemyRadar"),o=document.querySelector("#enemyRadarMobile"),l=document.querySelector("#text"),s=document.querySelector("#change"),d=document.querySelector("#title");function c(e,t){return e.some((function(e){return t.includes(e)}))}var u=function e(i,n){for(s.style.display="none",r.style.display="grid";a.firstChild;)a.removeChild(a.firstChild);for(;r.firstChild;)r.removeChild(r.firstChild);for(var o=function(o,l,s){var c=document.createElement("div");c.textContent=o,c.classList.add("cellHittable"),c.classList.add("cellHidden"),c.setAttribute("data",[l]),!1===[10,21,32,43,54,65,76,87,98,109].includes(l)&&(c.classList.remove("cellHidden"),s?(r.appendChild(c),c.addEventListener("click",(function(){if(function(e,a,r){function i(e,t){return e.some((function(e){return t===e}))}if("hit"!==a.gameBoard[r]&&"noHit"!==a.gameBoard[r]){a.receiveAttack(r);for(var n=[10,21,32,43,54,65,76,87,98,109],o=[],l=0;l<e.gameBoard.length;l+=1)"hit"!==e.gameBoard[l]&&"noHit"!==e.gameBoard[l]&&!1===i(n,e.gameBoard[l])&&o.push(l);if("hit"===e.gameBoard[t]){if(o=[],(""===e.gameBoard[t-1]||!isNaN(e.gameBoard[t-1])&&!1===i(n,e.gameBoard[t-1]))&&o.push(t-1),(""===e.gameBoard[t+1]||!isNaN(e.gameBoard[t+1])&&!1===i(n,e.gameBoard[t+1]))&&o.push(t+1),(""===e.gameBoard[t+11]||!isNaN(e.gameBoard[t+11])&&!1===i(n,e.gameBoard[t+11]))&&o.push(t+11),(""===e.gameBoard[t-11]||!isNaN(e.gameBoard[t-11])&&!1===i(n,e.gameBoard[t-11]))&&o.push(t-11),!o[0])for(var s=0;s<e.gameBoard.length;s+=1)"hit"!==e.gameBoard[s]&&"noHit"!==e.gameBoard[s]&&!1===i(n,e.gameBoard[s])&&o.push(s);console.log(t),console.log(o),console.log(e.gameBoard)}var d=o[Math.floor(Math.random()*o.length)];t=d,e.receiveAttack(d)}}(i,n,l),e(i,n),null!==c.textContent.match(/^[0-9]+$/))for(var a=0;a<n.shipList.length;a+=1){if(c.textContent===n.shipList[a].shipNumber.toString()&&!0===n.shipList[a].isSunk()){d.textContent="¡Hundiste un barco enemigo!";break}d.textContent="¡Le diste a un barco enemigo!"}else""===c.textContent&&(d.textContent="¡Fallaste el tiro!");n.allShipsSunked()?console.log("ganaste*placeholder*"):i.allShipsSunked()&&console.log("perdiste*placeholder*")})),c.addEventListener("mouseover",(function(){c.classList.add("hoverCell")})),c.addEventListener("mouseleave",(function(){c.classList.remove("hoverCell")})),"hit"===c.textContent?c.classList.add("cellShipHitted"):"noHit"===c.textContent&&c.classList.add("cellMiss")):(a.appendChild(c),c.classList.remove("cellHittable"),c.classList.add("cellFriendly"),null!==c.textContent.match(/^[0-9]+$/)?c.classList.add("cellShip"):"hit"===c.textContent?c.classList.add("cellShipHittedFriendly"):"noHit"===c.textContent&&c.classList.add("cellMissFriendly")))},l=0;l<i.gameBoard.length;l+=1)o(i.gameBoard[l],l,!1);for(var c=0;c<n.gameBoard.length;c+=1)o(n.gameBoard[c],c,!0)},h="horizontal",f=window.matchMedia("(max-width: 1050px)");s.addEventListener("click",(function(){h="horizontal"===h?"vertical":"horizontal"})),document.querySelector("#github").addEventListener("click",(function(){window.open("https://github.com/SebasDrewes/","_blank")}));var v=function(){var t=[],a=["","","","","","","","","","",10,"","","","","","","","","","",21,"","","","","","","","","","",32,"","","","","","","","","","",43,"","","","","","","","","","",54,"","","","","","","","","","",65,"","","","","","","","","","",76,"","","","","","","","","","",87,"","","","","","","","","","",98,"","","","","","","","","","",109],r=[10,21,32,43,54,65,76,87,98,109];return{placeShip:function(i,n,o){var l=[];function s(e,t){return e.some((function(e){return t.includes(e)}))}if("horizontal"===o){for(var d=i;d<i+n;d+=1)!1===l.includes(d)&&l.push(d);if(!1===s(r,l)){if(i+n<120){var c=e(i,n,o);t.push(c);for(var u=i;u<i+n;u+=1)!1===r.includes(u)&&r.push(u);for(var h=0;h<c.shipLength;h+=1)a[i+h]=i;c.shipNumber=i}console.log(t)}}else if("vertical"===o){for(var f=i;f<i+11*n;f+=11)!1===l.includes(f)&&l.push(f);if(!1===s(r,l)&&i+11*n<120){var v=e(i,n,o);t.push(v);for(var m=i;m<i+11*n;m+=11)!1===r.includes(m)&&r.push(m);for(var p=0;p<11*v.shipLength;p+=11)a[i+p]=i;v.shipNumber=i}}},receiveAttack:function(e){if(""!==a[e])for(var r=0;r<t.length;r+=1)t[r].shipNumber===a[e]&&(a[e]="hit",t[r].hit(e));else a[e]="noHit"},gameBoard:a,shipList:t,allShipsSunked:function(){return!!t.every((function(e){return!0===e.isSunk()}))}}},m=v(),p=v();p.placeShip(0,5,"horizontal"),p.placeShip(44,3,"vertical"),p.placeShip(7,3,"horizontal"),p.placeShip(36,3,"vertical"),p.placeShip(96,2,"horizontal"),function e(t,r,s){for(;a.firstChild;)a.removeChild(a.firstChild);for(var v=function(v,m){var p=document.createElement("div"),g=[10,21,32,43,54,65,76,87,98,109];p.setAttribute("data",[m]),p.classList.add("cellHidden"),p.classList.add("cell"),p.textContent=v,a.appendChild(p),!1===g.includes(m)&&(p.classList.remove("cellHidden"),p.addEventListener("click",(function(){switch(t.placeShip(m,s,h),t.shipList.length){case 1:e(t,r,4);break;case 2:case 3:e(t,r,3);break;case 4:e(t,r,2);break;case 5:u(t,r),d.textContent="Esperando instrucciones...",l.style.display="none",function(e){e.matches?(o.style.display="block",d.style.fontSize="2.5em",i.style.display="block"):(i.style.display="block",n.style.display="block")}(f);break;default:e(t,r,4)}for(var a=m;a<m+s;a+=1)g.push(a);for(var c=document.querySelectorAll(".cell"),v=0;v<c.length;v+=1)""!==c[v].textContent&&c[v].classList.add("cellShip")})),p.addEventListener("mouseover",(function(){var e=document.querySelectorAll(".cell"),t=[];if("horizontal"===h){for(var a=0;a<e.length;a+=1)if(e[a].getAttribute("data")===m.toString()){for(var r=0;r<s;r+=1)!1===t.includes(a+r)&&t.push(a+r);for(var i=0;i<s;i+=1){var n=t.every((function(t){return void 0!==e[t]&&""===e[t].textContent}));!1===c(g,t)&&n?e[a+i]&&e[a+i].classList.add("hoverCell"):e[a].classList.add("invalidCell")}}}else for(var o=0;o<e.length;o+=1)if(e[o].getAttribute("data")===m.toString()){for(var l=0;l<11*s;l+=11)!1===t.includes(o+l)&&t.push(o+l);for(var d=0;d<11*s;d+=11){var u=t.every((function(t){return void 0!==e[t]&&""===e[t].textContent}));!1===c(g,t)&&u?e[o+d]&&e[o+d].classList.add("hoverCell"):e[o].classList.add("invalidCell")}}})),p.addEventListener("mouseleave",(function(){var e=document.querySelectorAll(".cell");e.forEach((function(e){return e.classList.remove("hoverCell")})),e.forEach((function(e){return e.classList.remove("invalidCell")}))})))},m=0;m<t.gameBoard.length;m+=1)v(t.gameBoard[m],m)}(m,p,5)})();