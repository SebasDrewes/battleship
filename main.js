(()=>{"use strict";var e=function(e,t,i){var n={},r=t,a=i;if("horizontal"===a)for(var l=0;l<t;l+=1)n[e+l]="noHit";else if("vertical"===a)for(var o=0;o<10*t;o+=10)n[e+o]="noHit";return{hitPoints:n,hit:function(e){n[e]="hit"},isSunk:function(){return!!Object.values(n).every((function(e){return"hit"===e}))},shipLength:r}};var t=document.querySelector("#playerBoard"),i=document.querySelector("#enemyBoard"),n=document.querySelector("#text");function r(e,t){return e.some((function(e){return t.includes(e)}))}var a=function e(r,a){for(i.style.display="grid";t.firstChild;)t.removeChild(t.firstChild);for(;i.firstChild;)i.removeChild(i.firstChild);for(var l=function(l,o,s){var c=document.createElement("div");c.textContent=l,c.classList.add("cellHittable"),c.classList.add("cellHidden"),c.setAttribute("data",[o]),!1===[10,21,32,43,54,65,76,87,98,109].includes(o)&&(c.classList.remove("cellHidden"),s?(i.appendChild(c),c.addEventListener("click",(function(){(function(e,t,i){if("hit"!==t.gameBoard[i]&&"noHit"!==t.gameBoard[i]){t.receiveAttack(i);for(var n=[],r=0;r<e.gameBoard.length;r+=1)"hit"!==e.gameBoard[r]&&"noHit"!==e.gameBoard[r]&&n.push(r);var a=n[Math.floor(Math.random()*n.length)];e.receiveAttack(a)}})(r,a,o),e(r,a),null!==c.textContent.match(/^[0-9]+$/)?n.textContent="¡Le diste a un barco enemigo!":""===c.textContent&&(n.textContent="¡Fallaste el tiro!",q)})),c.addEventListener("mouseover",(function(){c.classList.add("hoverCell")})),c.addEventListener("mouseleave",(function(){c.classList.remove("hoverCell")})),"hit"===c.textContent?c.classList.add("cellShipHitted"):"noHit"===c.textContent&&c.classList.add("cellMiss")):(t.appendChild(c),c.classList.remove("cellHittable"),c.classList.add("cellFriendly"),null!==c.textContent.match(/^[0-9]+$/)?c.classList.add("cellShip"):"hit"===c.textContent?c.classList.add("cellShipHittedFriendly"):"noHit"===c.textContent&&c.classList.add("cellMissFriendly")))},o=0;o<r.gameBoard.length;o+=1)l(r.gameBoard[o],o,!1);for(var s=0;s<a.gameBoard.length;s+=1)l(a.gameBoard[s],s,!0)},l="horizontal";document.querySelector("#change").addEventListener("click",(function(){l="horizontal"===l?"vertical":"horizontal"})),document.querySelector("#github").addEventListener("click",(function(){window.open("https://github.com/SebasDrewes/","_blank")}));var o=function(){var t=[],i=["","","","","","","","","","","10","","","","","","","","","","","21","","","","","","","","","","","32","","","","","","","","","","","43","","","","","","","","","","","54","","","","","","","","","","","65","","","","","","","","","","","76","","","","","","","","","","","87","","","","","","","","","","","98","","","","","","","","","","","109"],n=[10,21,32,43,54,65,76,87,98,109];return{placeShip:function(r,a,l){var o=[];function s(e,t){return e.some((function(e){return t.includes(e)}))}if("horizontal"===l){for(var c=r;c<r+a;c+=1)!1===o.includes(c)&&o.push(c);if(!1===s(n,o)){if(r+a<120){var d=e(r,a,l);t.push(d);for(var u=r;u<r+a;u+=1)!1===n.includes(u)&&n.push(u);for(var h=0;h<d.shipLength;h+=1)i[r+h]=r;d.shipNumber=r}console.log(t)}}else if("vertical"===l){for(var v=r;v<r+11*a;v+=11)!1===o.includes(v)&&o.push(v);if(!1===s(n,o)&&r+11*a<120){var f=e(r,a,l);t.push(f);for(var m=r;m<r+11*a;m+=11)!1===n.includes(m)&&n.push(m);for(var p=0;p<11*f.shipLength;p+=11)i[r+p]=r;f.shipNumber=r}}},receiveAttack:function(e){if(""!==i[e])for(var n=0;n<t.length;n+=1)t[n].shipNumber===i[e]&&(i[e]="hit",t[n].hit(e));else i[e]="noHit"},gameBoard:i,shipList:t,allShipsSunked:function(){return!!t.every((function(e){return!0===e.isSunk()}))}}},s=o(),c=o();c.placeShip(0,5,"horizontal"),c.placeShip(10,4,"vertical"),c.placeShip(7,3,"horizontal"),c.placeShip(36,3,"vertical"),c.placeShip(96,2,"horizontal"),function e(i,n,o){for(;t.firstChild;)t.removeChild(t.firstChild);for(var s=function(s,c){var d=document.createElement("div"),u=[10,21,32,43,54,65,76,87,98,109];d.setAttribute("data",[c]),d.classList.add("cellHidden"),d.classList.add("cell"),d.textContent=s,t.appendChild(d),!1===u.includes(c)&&(d.classList.remove("cellHidden"),d.addEventListener("click",(function(){switch(i.placeShip(c,o,l),i.shipList.length){case 1:e(i,n,4);break;case 2:case 3:e(i,n,3);break;case 4:e(i,n,2);break;case 5:a(i,n);break;default:e(i,n,4)}for(var t=c;t<c+o;t+=1)u.push(t);for(var r=document.querySelectorAll(".cell"),s=0;s<r.length;s+=1)""!==r[s].textContent&&r[s].classList.add("cellShip")})),d.addEventListener("mouseover",(function(){var e=document.querySelectorAll(".cell"),t=[];if("horizontal"===l){for(var i=0;i<e.length;i+=1)if(e[i].getAttribute("data")===c.toString()){for(var n=0;n<o;n+=1)!1===t.includes(i+n)&&t.push(i+n);for(var a=0;a<o;a+=1){var s=t.every((function(t){return void 0!==e[t]&&""===e[t].textContent}));!1===r(u,t)&&s?e[i+a]&&e[i+a].classList.add("hoverCell"):e[i].classList.add("invalidCell")}}}else for(var d=0;d<e.length;d+=1)if(e[d].getAttribute("data")===c.toString()){for(var h=0;h<11*o;h+=11)!1===t.includes(d+h)&&t.push(d+h);for(var v=0;v<11*o;v+=11){var f=t.every((function(t){return void 0!==e[t]&&""===e[t].textContent}));!1===r(u,t)&&f?e[d+v]&&e[d+v].classList.add("hoverCell"):e[d].classList.add("invalidCell")}}})),d.addEventListener("mouseleave",(function(){var e=document.querySelectorAll(".cell");e.forEach((function(e){return e.classList.remove("hoverCell")})),e.forEach((function(e){return e.classList.remove("invalidCell")}))})))},c=0;c<i.gameBoard.length;c+=1)s(i.gameBoard[c],c)}(s,c,5)})();