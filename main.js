(()=>{"use strict";var e=function(e,t,r){var n={},i=t,o=r;if("horizontal"===o)for(var a=0;a<t;a+=1)n[e+a]="noHit";else if("vertical"===o)for(var l=0;l<10*t;l+=10)n[e+l]="noHit";return{hitPoints:n,hit:function(e){n[e]="hit"},isSunk:function(){return!!Object.values(n).every((function(e){return"hit"===e}))},shipLength:i}};var t=document.querySelector("#container"),r="horizontal";document.querySelector("#change").addEventListener("click",(function(){r="horizontal"===r?"vertical":"horizontal"}));var n=function(){var t=[],r=["","","","","","","","","","","10","","","","","","","","","","","21","","","","","","","","","","","32","","","","","","","","","","","43","","","","","","","","","","","54","","","","","","","","","","","65","","","","","","","","","","","76","","","","","","","","","","","87","","","","","","","","","","","98","","","","","","","","","","","109"],n=[10,21,32,43,54,65,76,87,98,109];return{placeShip:function(i,o,a){var l=[];function u(e,t){return e.some((function(e){return t.includes(e)}))}if("horizontal"===a){for(var c=i;c<i+o;c+=1)!1===l.includes(c)&&l.push(c);if(!1===u(n,l)&&i+o<200){var s=e(i,o,a);t.push(s);for(var f=i;f<i+o;f+=1)!1===n.includes(f)&&n.push(f);for(var v=0;v<s.shipLength;v+=1)r[i+v]=i;s.shipNumber=i}}else if("vertical"===a){for(var d=i;d<i+11*o;d+=11)!1===l.includes(d)&&l.push(d);if(!1===u(n,l)&&i+11*o<120){var h=e(i,o,a);t.push(h);for(var p=i;p<i+11*o;p+=11)!1===n.includes(p)&&n.push(p);for(var m=0;m<11*h.shipLength;m+=11)r[i+m]=i;h.shipNumber=i}}},receiveAttack:function(e){if(""!==r[e])for(var n=0;n<t.length;n+=1)t[n].shipNumber===r[e]&&(r[e]="hit",t[n].hit(e));else r[e]="noHit"},gameBoard:r,shipList:t,allShipsSunked:function(){return!!t.every((function(e){return!0===e.isSunk()}))}}},i=n();n(),function e(n,i){for(;t.firstChild;)t.removeChild(t.firstChild);for(var o=function(o,a){var l=document.createElement("div"),u=[10,21,32,43,54,65,76,87,98,109];function c(e,t){return e.some((function(e){return t.includes(e)}))}l.setAttribute("data",[a]),l.classList.add("cellHidden"),l.classList.add("cell"),l.textContent=o,t.appendChild(l),!1===u.includes(a)&&(l.classList.remove("cellHidden"),l.addEventListener("click",(function(){n.placeShip(a,i,r),e(n,i);for(var t=a;t<a+i;t+=1)u.push(t)})),l.addEventListener("mouseover",(function(){var e=document.querySelectorAll(".cell");if("horizontal"===r){for(var t=[],n=0;n<e.length;n+=1)if(e[n].getAttribute("data")===a.toString()){for(var o=0;o<i;o+=1)!1===t.includes(n+o)&&t.push(n+o);for(var l=0;l<i;l+=1){var s=t.every((function(t){return""===e[t].textContent}));console.log(t),console.log(s),!1===c(u,t)&&s&&e[n+l].classList.add("hoverCell")}}}else for(var f=0;f<e.length;f+=1)if(e[f].getAttribute("data")===a.toString())for(var v=0;v<11*i;v+=11)e[f+v]&&e[f+v].classList.add("hoverCell")})),l.addEventListener("mouseleave",(function(){document.querySelectorAll(".cell").forEach((function(e){return e.classList.remove("hoverCell")}))})))},a=0;a<n.gameBoard.length;a+=1)o(n.gameBoard[a],a)}(i,3)})();