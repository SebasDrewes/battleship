(()=>{"use strict";var e=function(e,a,t){var r={},o=a,i=t;if("horizontal"===i)for(var n=0;n<a;n+=1)r[e+n]="noHit";else if("vertical"===i)for(var l=0;l<11*a;l+=11)r[e+l]="noHit";return{hitPoints:r,hit:function(e){r[e]="hit"},isSunk:function(){return!!Object.values(r).every((function(e){return"hit"===e}))},shipLength:o}};var a="",t="",r="",o="",i=document.querySelector("#playerBoard"),n=document.querySelector("#enemyBoard"),l=document.querySelector("#tuRadar"),d=document.querySelector("#enemyRadar"),s=document.querySelector("#enemyRadarMobile"),c=document.querySelector("#text"),u=document.querySelector("#change"),h=document.querySelector("#title"),m=document.querySelector("#puertaCorrediza"),g=document.querySelector("#newGame");function v(e,a){return e.some((function(e){return a.includes(e)}))}var f=function e(l,d){for(u.style.display="none",n.style.display="grid";i.firstChild;)i.removeChild(i.firstChild);for(;n.firstChild;)n.removeChild(n.firstChild);for(var s=function(s,c,u){var m=document.createElement("div");m.textContent=s,m.classList.add("cellHittable"),m.classList.add("cellHidden"),m.setAttribute("data",[c]),!1===[10,21,32,43,54,65,76,87,98,109].includes(c)&&(m.classList.remove("cellHidden"),u?(n.appendChild(m),m.addEventListener("click",(function(){if(function(e,i,n){function l(e,a){return e.some((function(e){return a===e}))}if("hit"!==i.gameBoard[n]&&"noHit"!==i.gameBoard[n]){i.receiveAttack(n);for(var d=[10,21,32,43,54,65,76,87,98,109],s=[],c=0;c<e.gameBoard.length;c+=1)"hit"!==e.gameBoard[c]&&"noHit"!==e.gameBoard[c]&&!1===l(d,e.gameBoard[c])&&s.push(c);if("hit"===e.gameBoard[a]){if(s=[],t=a,""!==e.gameBoard[a-1]&&isNaN(e.gameBoard[a-1])||!1!==l(d,e.gameBoard[a-1])||s.push(a-1),""!==e.gameBoard[a+1]&&isNaN(e.gameBoard[a+1])||!1!==l(d,e.gameBoard[a+1])||s.push(a+1),""!==e.gameBoard[a+11]&&isNaN(e.gameBoard[a+11])||!1!==l(d,e.gameBoard[a+11])||s.push(a+11),""!==e.gameBoard[a-11]&&isNaN(e.gameBoard[a-11])||!1!==l(d,e.gameBoard[a-11])||s.push(a-11),!s[0])for(var u=0;u<e.gameBoard.length;u+=1)"hit"!==e.gameBoard[u]&&"noHit"!==e.gameBoard[u]&&!1===l(d,e.gameBoard[u])&&s.push(u)}else if("hit"===e.gameBoard[t]&&"noHit"===e.gameBoard[a]){if(s=[],r=t,""!==e.gameBoard[t-1]&&isNaN(e.gameBoard[t-1])||!1!==l(d,e.gameBoard[t-1])||s.push(t-1),""!==e.gameBoard[t+1]&&isNaN(e.gameBoard[t+1])||!1!==l(d,e.gameBoard[t+1])||s.push(t+1),""!==e.gameBoard[t+11]&&isNaN(e.gameBoard[t+11])||!1!==l(d,e.gameBoard[t+11])||s.push(t+11),""!==e.gameBoard[t-11]&&isNaN(e.gameBoard[t-11])||!1!==l(d,e.gameBoard[t-11])||s.push(t-11),!s[0])for(var h=0;h<e.gameBoard.length;h+=1)"hit"!==e.gameBoard[h]&&"noHit"!==e.gameBoard[h]&&!1===l(d,e.gameBoard[h])&&s.push(h)}else if("hit"===e.gameBoard[r]&&"noHit"===e.gameBoard[a]){if(s=[],o=r,""!==e.gameBoard[r-1]&&isNaN(e.gameBoard[r-1])||!1!==l(d,e.gameBoard[r-1])||s.push(r-1),""!==e.gameBoard[r+1]&&isNaN(e.gameBoard[r+1])||!1!==l(d,e.gameBoard[r+1])||s.push(r+1),""!==e.gameBoard[r+11]&&isNaN(e.gameBoard[r+11])||!1!==l(d,e.gameBoard[r+11])||s.push(r+11),""!==e.gameBoard[r-11]&&isNaN(e.gameBoard[r-11])||!1!==l(d,e.gameBoard[r-11])||s.push(r-11),!s[0])for(var m=0;m<e.gameBoard.length;m+=1)"hit"!==e.gameBoard[m]&&"noHit"!==e.gameBoard[m]&&!1===l(d,e.gameBoard[m])&&s.push(m)}else if("hit"===e.gameBoard[o]&&"noHit"===e.gameBoard[a]&&(s=[],""!==e.gameBoard[o-1]&&isNaN(e.gameBoard[o-1])||!1!==l(d,e.gameBoard[o-1])||s.push(o-1),""!==e.gameBoard[o+1]&&isNaN(e.gameBoard[o+1])||!1!==l(d,e.gameBoard[o+1])||s.push(o+1),""!==e.gameBoard[o+11]&&isNaN(e.gameBoard[o+11])||!1!==l(d,e.gameBoard[o+11])||s.push(o+11),""!==e.gameBoard[o-11]&&isNaN(e.gameBoard[o-11])||!1!==l(d,e.gameBoard[o-11])||s.push(o-11),!s[0]))for(var g=0;g<e.gameBoard.length;g+=1)"hit"!==e.gameBoard[g]&&"noHit"!==e.gameBoard[g]&&!1===l(d,e.gameBoard[g])&&s.push(g);var v=s[Math.floor(Math.random()*s.length)];a=v,e.receiveAttack(v)}}(l,d,c),e(l,d),null!==m.textContent.match(/^[0-9]+$/))for(var i=0;i<d.shipList.length;i+=1){if(m.textContent===d.shipList[i].shipNumber.toString()&&!0===d.shipList[i].isSunk()){h.textContent="¡Hundiste un barco enemigo!";break}h.textContent="¡Le diste a un barco enemigo!"}else""===m.textContent&&(h.textContent="¡Fallaste el tiro!");d.allShipsSunked()?console.log("ganaste*placeholder*"):l.allShipsSunked()&&console.log("perdiste*placeholder*")})),m.addEventListener("mouseover",(function(){m.classList.add("hoverCell")})),m.addEventListener("mouseleave",(function(){m.classList.remove("hoverCell")})),"hit"===m.textContent?m.classList.add("cellShipHitted"):"noHit"===m.textContent&&m.classList.add("cellMiss")):(i.appendChild(m),m.classList.remove("cellHittable"),m.classList.add("cellFriendly"),null!==m.textContent.match(/^[0-9]+$/)?m.classList.add("cellShip"):"hit"===m.textContent?m.classList.add("cellShipHittedFriendly"):"noHit"===m.textContent&&m.classList.add("cellMissFriendly")))},c=0;c<l.gameBoard.length;c+=1)s(l.gameBoard[c],c,!1);for(var m=0;m<d.gameBoard.length;m+=1)s(d.gameBoard[m],m,!0)},B="horizontal",p=window.matchMedia("(max-width: 1050px)");u.addEventListener("click",(function(){B="horizontal"===B?"vertical":"horizontal"})),document.querySelector("#github").addEventListener("click",(function(){window.open("https://github.com/SebasDrewes/","_blank")})),g.addEventListener("click",(function(){m.style.width="0%",g.style.fontSize="0"}));var y=function(){var a=[],t=["","","","","","","","","","",10,"","","","","","","","","","",21,"","","","","","","","","","",32,"","","","","","","","","","",43,"","","","","","","","","","",54,"","","","","","","","","","",65,"","","","","","","","","","",76,"","","","","","","","","","",87,"","","","","","","","","","",98,"","","","","","","","","","",109],r=[10,21,32,43,54,65,76,87,98,109],o=function(o,i,n){var l=[];function d(e,a){return e.some((function(e){return a.includes(e)}))}if("horizontal"===n){for(var s=o;s<o+i;s+=1)!1===l.includes(s)&&l.push(s);if(!1===d(r,l)&&o+i<120){var c=e(o,i,n);a.push(c);for(var u=o;u<o+i;u+=1)!1===r.includes(u)&&r.push(u);for(var h=0;h<c.shipLength;h+=1)t[o+h]=o;c.shipNumber=o}}else if("vertical"===n){for(var m=o;m<o+11*i;m+=11)!1===l.includes(m)&&l.push(m);if(!1===d(r,l)&&o+11*i<120){var g=e(o,i,n);a.push(g);for(var v=o;v<o+11*i;v+=11)!1===r.includes(v)&&r.push(v);for(var f=0;f<11*g.shipLength;f+=11)t[o+f]=o;g.shipNumber=o}}};return{placeShip:o,receiveAttack:function(e){if(""!==t[e])for(var r=0;r<a.length;r+=1)a[r].shipNumber===t[e]&&(t[e]="hit",a[r].hit(e));else t[e]="noHit"},gameBoard:t,shipList:a,allShipsSunked:function(){return!!a.every((function(e){return!0===e.isSunk()}))},placeShipsRandomly:function(){switch(Math.floor(5*Math.random()+1)){case 1:o(0,5,"horizontal"),o(44,4,"vertical"),o(7,3,"horizontal"),o(36,3,"vertical"),o(96,2,"horizontal");break;case 2:o(0,5,"vertical"),o(47,4,"vertical"),o(17,3,"horizontal"),o(74,3,"vertical"),o(93,2,"horizontal");break;case 3:o(27,5,"horizontal"),o(58,4,"vertical"),o(12,3,"horizontal"),o(83,3,"horizontal"),o(99,2,"horizontal");break;case 4:o(16,5,"vertical"),o(56,4,"vertical"),o(52,3,"vertical"),o(12,3,"vertical"),o(8,2,"vertical");break;case 5:o(78,5,"horizontal"),o(34,4,"horizontal"),o(47,3,"horizontal"),o(15,3,"horizontal"),o(95,2,"horizontal");break;default:o(0,5,"horizontal"),o(44,4,"vertical"),o(7,3,"horizontal"),o(36,3,"vertical"),o(96,2,"horizontal")}}}},L=y(),C=y();C.placeShipsRandomly(),function e(a,t,r){for(;i.firstChild;)i.removeChild(i.firstChild);for(var o=function(o,n){var u=document.createElement("div"),m=[10,21,32,43,54,65,76,87,98,109];u.setAttribute("data",[n]),u.classList.add("cellHidden"),u.classList.add("cell"),u.textContent=o,i.appendChild(u),!1===m.includes(n)&&(u.classList.remove("cellHidden"),u.addEventListener("click",(function(){switch(a.placeShip(n,r,B),a.shipList.length){case 1:e(a,t,4);break;case 2:case 3:e(a,t,3);break;case 4:e(a,t,2);break;case 5:f(a,t),h.textContent="Esperando instrucciones...",c.style.display="none",function(e){e.matches?(s.style.display="block",h.style.fontSize="2.5em",l.style.display="block"):(l.style.display="block",d.style.display="block")}(p);break;default:e(a,t,4)}for(var o=n;o<n+r;o+=1)m.push(o);for(var i=document.querySelectorAll(".cell"),u=0;u<i.length;u+=1)""!==i[u].textContent&&i[u].classList.add("cellShip")})),u.addEventListener("mouseover",(function(){var e=document.querySelectorAll(".cell"),a=[];if("horizontal"===B){for(var t=0;t<e.length;t+=1)if(e[t].getAttribute("data")===n.toString()){for(var o=0;o<r;o+=1)!1===a.includes(t+o)&&a.push(t+o);for(var i=0;i<r;i+=1){var l=a.every((function(a){return void 0!==e[a]&&""===e[a].textContent}));!1===v(m,a)&&l?e[t+i]&&e[t+i].classList.add("hoverCell"):e[t].classList.add("invalidCell")}}}else for(var d=0;d<e.length;d+=1)if(e[d].getAttribute("data")===n.toString()){for(var s=0;s<11*r;s+=11)!1===a.includes(d+s)&&a.push(d+s);for(var c=0;c<11*r;c+=11){var u=a.every((function(a){return void 0!==e[a]&&""===e[a].textContent}));!1===v(m,a)&&u?e[d+c]&&e[d+c].classList.add("hoverCell"):e[d].classList.add("invalidCell")}}})),u.addEventListener("mouseleave",(function(){var e=document.querySelectorAll(".cell");e.forEach((function(e){return e.classList.remove("hoverCell")})),e.forEach((function(e){return e.classList.remove("invalidCell")}))})))},n=0;n<a.gameBoard.length;n+=1)o(a.gameBoard[n],n)}(L,C,5)})();